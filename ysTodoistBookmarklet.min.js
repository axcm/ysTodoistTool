!function(t,e,i){i=t.createElement("script"),i.src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js",i.onload=function(){e(jQuery.noConflict(1))},t.body.appendChild(i)}(document,function(t){function e(){for(mode=0,fselect=t("#filter").val(),tlist=t(".task_item:not(.checked,.history_item)"),dlist=tlist.find(".div_due_date .date"),!dlist.length&&t(".h2_date").length>1&&(dlist=t(".h2_date"),mode=1),t("#filter").children().remove(),t("#filter").append(t("<option></option>").val("ALL").text("ALL")),j=0;j<dlist.length;j++)lval=t(dlist[j]).text().replace(/\d\d:\d\d /g,""),ltext=lval,1==mode&&(ltext=t(dlist[j]).prev("a").text()),""!=lval&&0==t("#filter ."+lval).length&&t("#filter").append(t("<option></option>").attr("class",lval).val(lval).text(ltext));t("#filter").val(fselect),t("#filter").val()||t("#filter").val("ALL")}function l(){if(inttime=0,i=0,j=0,1==changeflg)return!1;if(e(),1==mode&&"ALL"!=fselect){for(k=0;k<dlist.length;k++)t(dlist[k]).text()==fselect&&(tlist=t(dlist[k]).closest("div").next("ul").find(".task_item:not(.checked,.history_item)"));fselect="ALL"}for(j=0;j<tlist.length;j++)if("ALL"==fselect||-1!=t(tlist[j]).find(".div_due_date .date").text().indexOf(fselect))for(llist=t(tlist[j]).find(".label:not(.label_sep)"),i=0;i<llist.length;i++)strlbl=t(llist[i]).text().replace("//","").replace("_","."),t.isNumeric(strlbl)&&(inttime+=parseInt(strlbl,10));t("#mtime").text(inttime),t("#mtime-hour").text((inttime/60).toFixed(1));var l=new Date;""!=t("#starttime").val()&&t("#chkstime").prop("checked")&&(l=new Date(l.toDateString()+" "+t("#starttime").val())),l.setMinutes(l.getMinutes()+inttime),t("#kantime").text(l.getHours()+":"+("0"+l.getMinutes()).slice(-2))}t("#mtime-outer").remove(),t("body").append('<div id="mtime-outer" style="position:fixed;bottom:0;right:0;padding:20px;background-color:#eee;"><p>フィルタ：<select id="filter" style="background-color:#FFF;"><option value="ALL">ALL</option></select></p><p>開始時間：<input type="checkbox" name="chkstime" id="chkstime" /><input type="time" name="starttime" id="starttime" value="09:30" disabled /></p><p>見積時間：<span id="mtime-hour"></span>h (<span id="mtime"></span>m)</p><p style="font-weight:bold;">完了見込：<span id="kantime"></span></p></div>'),mode=0,changeflg=0,t("#chkstime").on("change",function(){t("#chkstime").prop("checked")?t("#starttime").removeAttr("disabled"):t("#starttime").attr("disabled","disabled"),l()}),l(),setInterval(l,1e3),t("#filter").change(function(){t("#filter").blur(),l()}),t("#filter").focus(function(){changeflg=1}),t("#filter").blur(function(){changeflg=0})});